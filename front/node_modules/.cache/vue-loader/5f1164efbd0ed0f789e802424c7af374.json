{"remainingRequest":"/Users/steve/Git/Groupomania/front/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/Users/steve/Git/Groupomania/front/src/views/posts/Posts.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/steve/Git/Groupomania/front/src/views/posts/Posts.vue","mtime":1613322571535},{"path":"/Users/steve/Git/Groupomania/front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/steve/Git/Groupomania/front/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/steve/Git/Groupomania/front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/steve/Git/Groupomania/front/node_modules/vue-loader-v16/dist/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCB7IG1hcEFjdGlvbnMsIG1hcFN0YXRlIH0gZnJvbSAndnVleCcKaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJwoKZXhwb3J0IGRlZmF1bHQgewogIGRhdGEgKCkgewogICAgcmV0dXJuIHsKICAgICAgbWVzc2FnZTogbnVsbAogICAgfQogIH0sCgogIGNvbXB1dGVkOiB7CiAgICAuLi5tYXBTdGF0ZShbJ3VzZXInLCAncG9zdHMnXSkKICB9LAoKICBtZXRob2RzOiB7CiAgICAuLi5tYXBBY3Rpb25zKFsnZ2V0UG9zdHMnXSksCgogICAgc2VuZFBvc3QobWVzc2FnZSkgewogICAgYXhpb3MucG9zdCgnaHR0cDovL2xvY2FsaG9zdDozMDAwL2FwaS9wb3N0cy8nLAogICAgewogICAgICBkYXRhOiB7CiAgICAgICAgbWVzc2FnZTogbWVzc2FnZSwKICAgICAgICB1c2VySWQ6IHRoaXMudXNlci5pZAogICAgICB9CiAgICB9LAogICAgewogICAgICBoZWFkZXJzOiB7ICJBdXRob3JpemF0aW9uIiA6IGBCZWFyZXIgJHsgdGhpcy51c2VyLnRva2VuIH1gIH0KICAgIH0pCiAgICAudGhlbigoKSA9PiB7IAogICAgICB0aGlzLm1lc3NhZ2UgPSBudWxsLAogICAgICB0aGlzLmdldFBvc3RzKCkKICAgIH0pCiAgICAuY2F0Y2goZXJyb3IgPT4gY29uc29sZS5sb2coZXJyb3IpKTsgICAKICAgIH0sCiAgICAKICAgIHRyYXNoUG9zdChpZCkgewogICAgYXhpb3MuZGVsZXRlKCdodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL3Bvc3RzLycgKyBpZCwKICAgIHsKICAgICAgICBoZWFkZXJzOiB7ICJBdXRob3JpemF0aW9uIiA6IGBCZWFyZXIgJHsgdGhpcy51c2VyLnRva2VuIH1gIH0KICAgIH0pCiAgICAudGhlbigoKSA9PiB0aGlzLmdldFBvc3RzKCkpCiAgICAuY2F0Y2goZXJyb3IgPT4gY29uc29sZS5sb2coZXJyb3IpKTsKICAgIH0KICB9LAogIAogIG1vdW50ZWQgKCkgewogICAgdGhpcy5nZXRQb3N0cygpCiAgfQp9Cg=="},{"version":3,"sources":["/Users/steve/Git/Groupomania/front/src/views/posts/Posts.vue"],"names":[],"mappings":"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","file":"/Users/steve/Git/Groupomania/front/src/views/posts/Posts.vue","sourceRoot":"","sourcesContent":["<template>\n\n  <div class=\"content\" v-if=\"posts\">\n    <div class=\"posts\" v-for=\"post in posts\" :key=\"post\">\n\n      <div class=\"user\">\n        <p v-if=\"post.user\">@ {{ post.user.username }}</p>\n        <p v-else>@ inconnu</p>\n      </div>\n\n      <div class=\"post\">\n        <div class=\"bulle\">\n          <router-link :to=\"{ name: 'PostDetails', params: { id: post.id }}\">\n            <p>{{ post.message }}</p>\n          </router-link>\n        </div>\n          <p class=\"more\">\n            <span class=\"comments\">{{ post.comments.length }}</span> commentaires \n            <span class=\"trash\" @click=\"trashPost(post.id)\">suppr.</span>\n          </p>\n      </div>\n\n      <div class=\"time\">\n        <p>{{ post.createdAt }}</p>\n      </div>\n      \n    </div>\n    <form>\n        <input type=\"text\" v-model=\"message\" placeholder=\"message...\">\n        <button type=\"button\" @click=\"sendPost(message)\">Envoyer</button>\n    </form> \n  </div>\n\n  <div class=\"loading\" v-else>\n    <p>loading...</p>\n     <form>\n        <input type=\"text\" v-model=\"message\" placeholder=\"message...\">\n        <button type=\"button\" @click=\"send\">Envoyer</button>\n    </form> \n  </div>\n\n</template>\n\n<script>\nimport { mapActions, mapState } from 'vuex'\nimport axios from 'axios'\n\nexport default {\n  data () {\n    return {\n      message: null\n    }\n  },\n\n  computed: {\n    ...mapState(['user', 'posts'])\n  },\n\n  methods: {\n    ...mapActions(['getPosts']),\n\n    sendPost(message) {\n    axios.post('http://localhost:3000/api/posts/',\n    {\n      data: {\n        message: message,\n        userId: this.user.id\n      }\n    },\n    {\n      headers: { \"Authorization\" : `Bearer ${ this.user.token }` }\n    })\n    .then(() => { \n      this.message = null,\n      this.getPosts()\n    })\n    .catch(error => console.log(error));   \n    },\n    \n    trashPost(id) {\n    axios.delete('http://localhost:3000/api/posts/' + id,\n    {\n        headers: { \"Authorization\" : `Bearer ${ this.user.token }` }\n    })\n    .then(() => this.getPosts())\n    .catch(error => console.log(error));\n    }\n  },\n  \n  mounted () {\n    this.getPosts()\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.content {\n  margin-bottom: 5em;\n}\n\n.posts {\n  display: flex;\n  margin: 3em 0;\n  .user {\n    flex: 1;\n    margin: 5px;\n    p {\n        margin: 0;\n      }\n    .icon {\n      width: 3em;\n      height: 3em;\n    }\n  }\n  .post {\n    flex: 3;\n    &:hover {\n      .more {\n          display: block;\n        }\n      }\n    .bulle {\n      background-color: whitesmoke;\n      border-radius: 10px;\n      margin: 5px;\n      padding: .4em;\n      p {\n        font-weight: bold;\n      }\n      a {\n        text-decoration: none;\n        color: inherit;\n      }\n      &:hover {\n        margin: 5px;\n        box-shadow: 0px 0px 10px 1px darkgrey;\n      }\n    }\n    .more {\n      margin: 0;\n      display: none;\n    }\n  }\n  .time {\n    flex: 1;\n  }\n}\n\nform {\n  padding: 1em;\n  border-top: solid 2px lightgrey;\n  position: fixed;\n  bottom: 0;\n  left: 0;\n  background: white;\n  width: -webkit-fill-available;\n  input {\n      margin-right: 2em;\n      padding: .3em 1em;\n      width: 15em;\n      border-radius: 4px;\n      border: 1px solid darkgray;\n      &:focus {\n          outline: none;\n          box-shadow: 0px 0px 5px darkgrey;\n      }\n  }\n}\n\n</style>"]}]}