{"remainingRequest":"/Users/steve/Git/Groupomania/front/node_modules/babel-loader/lib/index.js!/Users/steve/Git/Groupomania/front/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/steve/Git/Groupomania/front/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/Users/steve/Git/Groupomania/front/src/views/posts/PostDetails.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/steve/Git/Groupomania/front/src/views/posts/PostDetails.vue","mtime":1613142244442},{"path":"/Users/steve/Git/Groupomania/front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/steve/Git/Groupomania/front/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/steve/Git/Groupomania/front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/steve/Git/Groupomania/front/node_modules/vue-loader-v16/dist/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL1VzZXJzL3N0ZXZlL0dpdC9Hcm91cG9tYW5pYS9mcm9udC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMiI7CmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmltcG9ydCB7IG1hcFN0YXRlIH0gZnJvbSAndnVleCc7CmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgcG9zdDogbnVsbCwKICAgICAgY29tbWVudHM6IFtdLAogICAgICBtZXNzYWdlOiBudWxsCiAgICB9OwogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHRoaXMuZ2V0UG9zdCh0aGlzLmlkKTsKICB9LAogIHByb3BzOiBbJ2lkJ10sCiAgY29tcHV0ZWQ6IF9vYmplY3RTcHJlYWQoe30sIG1hcFN0YXRlKFsndXNlciddKSksCiAgbWV0aG9kczogewogICAgZ2V0UG9zdDogZnVuY3Rpb24gZ2V0UG9zdChpZCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgYXhpb3MuZ2V0KCdodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL3Bvc3RzLycgKyBpZCwgewogICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICJBdXRob3JpemF0aW9uIjogIkJlYXJlciAiLmNvbmNhdCh0aGlzLnVzZXIudG9rZW4pCiAgICAgICAgfQogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXN1bHRzKSB7CiAgICAgICAgY29uc29sZS5sb2cocmVzdWx0cyksIF90aGlzLnBvc3QgPSByZXN1bHRzLmRhdGEucG9zdDsKICAgICAgICBfdGhpcy5jb21tZW50cyA9IHJlc3VsdHMuZGF0YS5wb3N0LmNvbW1lbnRzOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICByZXR1cm4gY29uc29sZS5sb2coZXJyb3IpOwogICAgICB9KTsKICAgIH0sCiAgICBzZW5kOiBmdW5jdGlvbiBzZW5kKGlkKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgYXhpb3MucG9zdCgnaHR0cDovL2xvY2FsaG9zdDozMDAwL2FwaS9jb21tZW50cy8nICsgaWQsIHsKICAgICAgICBkYXRhOiB7CiAgICAgICAgICBjb21tZW50OiB0aGlzLm1lc3NhZ2UsCiAgICAgICAgICB1c2VySWQ6IHRoaXMudXNlcklkCiAgICAgICAgfQogICAgICB9LCB7CiAgICAgICAgaGVhZGVyczogewogICAgICAgICAgIkF1dGhvcml6YXRpb24iOiAiQmVhcmVyICIuY29uY2F0KHRoaXMudG9rZW4pCiAgICAgICAgfQogICAgICB9KS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpczIubWVzc2FnZSA9IG51bGw7CgogICAgICAgIF90aGlzMi5nZXRQb3N0KGlkKTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgcmV0dXJuIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgfSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["/Users/steve/Git/Groupomania/front/src/views/posts/PostDetails.vue"],"names":[],"mappings":";AAmCA,OAAO,KAAP,MAAkB,OAAlB;AACA,SAAS,QAAT,QAAyB,MAAzB;AAEA,eAAe;AAEX,EAAA,IAFW,kBAEH;AACJ,WAAO;AACH,MAAA,IAAI,EAAE,IADH;AAEH,MAAA,QAAQ,EAAE,EAFP;AAGH,MAAA,OAAO,EAAE;AAHN,KAAP;AAKH,GARU;AASV,EAAA,OATU,qBASC;AACR,SAAK,OAAL,CAAa,KAAK,EAAlB;AACH,GAXU;AAYX,EAAA,KAAK,EAAE,CAAC,IAAD,CAZI;AAcX,EAAA,QAAQ,oBACD,QAAQ,CAAC,CAAC,MAAD,CAAD,CADP,CAdG;AAkBX,EAAA,OAAO,EAAE;AAEL,IAAA,OAFK,mBAEG,EAFH,EAEO;AAAA;;AACR,MAAA,KAAK,CAAC,GAAN,CAAU,qCAAqC,EAA/C,EAAmD;AAC/C,QAAA,OAAO,EAAE;AAAE,4CAA6B,KAAK,IAAL,CAAU,KAAvC;AAAF;AADsC,OAAnD,EAGC,IAHD,CAGM,UAAA,OAAM,EAAK;AACb,QAAA,OAAO,CAAC,GAAR,CAAY,OAAZ,GACA,KAAI,CAAC,IAAL,GAAY,OAAO,CAAC,IAAR,CAAa,IADzB;AAEA,QAAA,KAAI,CAAC,QAAL,GAAgB,OAAO,CAAC,IAAR,CAAa,IAAb,CAAkB,QAAlC;AACH,OAPD,EAQC,KARD,CAQO,UAAA,KAAI;AAAA,eAAK,OAAO,CAAC,GAAR,CAAY,KAAZ,CAAL;AAAA,OARX;AASH,KAZI;AAcL,IAAA,IAdK,gBAcA,EAdA,EAcI;AAAA;;AACL,MAAA,KAAK,CAAC,IAAN,CAAW,wCAAwC,EAAnD,EACA;AACI,QAAA,IAAI,EAAE;AACF,UAAA,OAAO,EAAE,KAAK,OADZ;AAEF,UAAA,MAAM,EAAE,KAAK;AAFX;AADV,OADA,EAOA;AACI,QAAA,OAAO,EAAE;AAAE,4CAA6B,KAAK,KAAlC;AAAF;AADb,OAPA,EAUC,IAVD,CAUM,YAAM;AACR,QAAA,MAAI,CAAC,OAAL,GAAe,IAAf;;AACA,QAAA,MAAI,CAAC,OAAL,CAAa,EAAb;AACH,OAbD,EAcC,KAdD,CAcO,UAAA,KAAI;AAAA,eAAK,OAAO,CAAC,GAAR,CAAY,KAAZ,CAAL;AAAA,OAdX;AAeJ;AA9BK;AAlBE,CAAf","sourcesContent":["<template>\n\n    <div v-if=\"post\">\n\n        <div class=\"posts\">\n            <div class=\"user\">\n                <p v-if=\"post.user\">@ {{ post.user.username }}</p>\n                <p v-else>@ inconnu</p>\n            </div>\n            <div class=\"post\">\n                <p>{{ post.message }}</p>\n            </div>\n        </div>\n        \n        <div class=\"comments\" v-for=\"comment in comments\" :key= comment>\n            <div class=\"user\">\n                <p>@ {{ comment.userId }}</p>\n            </div>\n            <div class=\"comment\">\n                <p>{{ comment.message }}</p>\n            </div>\n        </div>\n\n        <form>\n            <input type=\"text\" v-model=\"message\" placeholder=\"commentaire...\">\n            <button type=\"button\" @click=\"send(id)\">Envoyer</button>\n        </form> \n    </div>\n\n    <div v-else>\n        <p>loading...</p>\n    </div>\n</template>\n\n<script>\nimport axios from 'axios'\nimport { mapState } from 'vuex';\n\nexport default {\n\n    data () {\n        return {\n            post: null,\n            comments: [],\n            message: null\n        }\n    },\n     mounted () {\n        this.getPost(this.id);\n    },\n    props: ['id'],\n\n    computed: {\n        ...mapState(['user'])\n    },\n\n    methods: {\n\n        getPost(id) {\n            axios.get('http://localhost:3000/api/posts/' + id, {\n                headers: { \"Authorization\" : `Bearer ${ this.user.token }` }\n            })\n            .then(results => {\n                console.log(results),\n                this.post = results.data.post;\n                this.comments = results.data.post.comments;\n            })\n            .catch(error => console.log(error))\n        },\n\n        send(id) {\n            axios.post('http://localhost:3000/api/comments/' + id,\n            {\n                data: {\n                    comment: this.message,\n                    userId: this.userId\n                }\n            },\n            {\n                headers: { \"Authorization\" : `Bearer ${ this.token }` }\n            })\n            .then(() => {\n                this.message = null;\n                this.getPost(id);\n            })\n            .catch(error => console.log(error));  \n        }\n    }\n}\n\n</script>\n\n<style lang=\"scss\" scoped>\n\n.posts {\n    display: flex;\n    margin: 3em 0;\n    padding: 1em;\n    .user {\n        flex: 1;\n        p {\n            margin: 0;\n        }\n    }\n    .post {\n      flex: 3;\n      background-color: lightgrey;\n      border-radius: 10px;\n      cursor: pointer;\n      p:nth-child(1) {\n        font-weight: bold;\n      }\n    }\n}\n.comments {\n    display: flex;\n    padding: 1em;\n    margin-bottom: 4em;\n    .user {\n        flex: 1;\n        p {\n            margin: 0;\n        }\n    }\n    .comment {\n      flex: 3;\n      background-color: whitesmoke;\n      border-radius: 10px;\n      cursor: pointer;\n      p:nth-child(1) {\n        font-weight: bold;\n      }\n    }\n}\n\n.icon {\n    width: 3em;\n    height: 3em;\n\n}\n\nform {\n  padding: 1em;\n  border-top: solid 2px lightgrey;\n  position: fixed;\n  bottom: 0;\n  left: 0;\n  background: white;\n  width: -webkit-fill-available;\n  input {\n      margin-right: 2em;\n      padding: .3em 1em;\n      width: 15em;\n      border-radius: 4px;\n      border: 1px solid darkgray;\n      &:focus {\n          outline: none;\n          box-shadow: 0px 0px 5px darkgrey;\n      }\n  }\n}\n</style>\n\n"],"sourceRoot":""}]}