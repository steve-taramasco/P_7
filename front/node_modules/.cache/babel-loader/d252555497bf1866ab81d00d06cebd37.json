{"remainingRequest":"/Users/steve/Git/Groupomania/front/node_modules/babel-loader/lib/index.js!/Users/steve/Git/Groupomania/front/node_modules/vue-loader-v16/dist/templateLoader.js??ref--6!/Users/steve/Git/Groupomania/front/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/steve/Git/Groupomania/front/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/Users/steve/Git/Groupomania/front/src/views/posts/Posts.vue?vue&type=template&id=5284a266&scoped=true","dependencies":[{"path":"/Users/steve/Git/Groupomania/front/src/views/posts/Posts.vue","mtime":1613322571535},{"path":"/Users/steve/Git/Groupomania/front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/steve/Git/Groupomania/front/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/steve/Git/Groupomania/front/node_modules/vue-loader-v16/dist/templateLoader.js","mtime":499162500000},{"path":"/Users/steve/Git/Groupomania/front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/steve/Git/Groupomania/front/node_modules/vue-loader-v16/dist/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgcmVuZGVyTGlzdCBhcyBfcmVuZGVyTGlzdCwgRnJhZ21lbnQgYXMgX0ZyYWdtZW50LCBvcGVuQmxvY2sgYXMgX29wZW5CbG9jaywgY3JlYXRlQmxvY2sgYXMgX2NyZWF0ZUJsb2NrLCB0b0Rpc3BsYXlTdHJpbmcgYXMgX3RvRGlzcGxheVN0cmluZywgY3JlYXRlVk5vZGUgYXMgX2NyZWF0ZVZOb2RlLCBjcmVhdGVDb21tZW50Vk5vZGUgYXMgX2NyZWF0ZUNvbW1lbnRWTm9kZSwgcmVzb2x2ZUNvbXBvbmVudCBhcyBfcmVzb2x2ZUNvbXBvbmVudCwgd2l0aEN0eCBhcyBfd2l0aEN0eCwgY3JlYXRlVGV4dFZOb2RlIGFzIF9jcmVhdGVUZXh0Vk5vZGUsIHZNb2RlbFRleHQgYXMgX3ZNb2RlbFRleHQsIHdpdGhEaXJlY3RpdmVzIGFzIF93aXRoRGlyZWN0aXZlcywgd2l0aFNjb3BlSWQgYXMgX3dpdGhTY29wZUlkLCBwdXNoU2NvcGVJZCBhcyBfcHVzaFNjb3BlSWQsIHBvcFNjb3BlSWQgYXMgX3BvcFNjb3BlSWQgfSBmcm9tICJ2dWUiOwoKdmFyIF93aXRoSWQgPSAvKiNfX1BVUkVfXyovX3dpdGhTY29wZUlkKCJkYXRhLXYtNTI4NGEyNjYiKTsKCl9wdXNoU2NvcGVJZCgiZGF0YS12LTUyODRhMjY2Iik7Cgp2YXIgX2hvaXN0ZWRfMSA9IHsKICBrZXk6IDAsCiAgY2xhc3M6ICJjb250ZW50Igp9Owp2YXIgX2hvaXN0ZWRfMiA9IHsKICBjbGFzczogInVzZXIiCn07CnZhciBfaG9pc3RlZF8zID0gewogIGtleTogMAp9Owp2YXIgX2hvaXN0ZWRfNCA9IHsKICBrZXk6IDEKfTsKdmFyIF9ob2lzdGVkXzUgPSB7CiAgY2xhc3M6ICJwb3N0Igp9Owp2YXIgX2hvaXN0ZWRfNiA9IHsKICBjbGFzczogImJ1bGxlIgp9Owp2YXIgX2hvaXN0ZWRfNyA9IHsKICBjbGFzczogIm1vcmUiCn07CnZhciBfaG9pc3RlZF84ID0gewogIGNsYXNzOiAiY29tbWVudHMiCn07Cgp2YXIgX2hvaXN0ZWRfOSA9IC8qI19fUFVSRV9fKi9fY3JlYXRlVGV4dFZOb2RlKCIgY29tbWVudGFpcmVzICIpOwoKdmFyIF9ob2lzdGVkXzEwID0gewogIGNsYXNzOiAidGltZSIKfTsKdmFyIF9ob2lzdGVkXzExID0gewogIGtleTogMSwKICBjbGFzczogImxvYWRpbmciCn07Cgp2YXIgX2hvaXN0ZWRfMTIgPSAvKiNfX1BVUkVfXyovX2NyZWF0ZVZOb2RlKCJwIiwgbnVsbCwgImxvYWRpbmcuLi4iLCAtMQovKiBIT0lTVEVEICovCik7CgpfcG9wU2NvcGVJZCgpOwoKZXhwb3J0IHZhciByZW5kZXIgPSAvKiNfX1BVUkVfXyovX3dpdGhJZChmdW5jdGlvbiAoX2N0eCwgX2NhY2hlLCAkcHJvcHMsICRzZXR1cCwgJGRhdGEsICRvcHRpb25zKSB7CiAgdmFyIF9jb21wb25lbnRfcm91dGVyX2xpbmsgPSBfcmVzb2x2ZUNvbXBvbmVudCgicm91dGVyLWxpbmsiKTsKCiAgcmV0dXJuIF9jdHgucG9zdHMgPyAoX29wZW5CbG9jaygpLCBfY3JlYXRlQmxvY2soImRpdiIsIF9ob2lzdGVkXzEsIFsoX29wZW5CbG9jayh0cnVlKSwgX2NyZWF0ZUJsb2NrKF9GcmFnbWVudCwgbnVsbCwgX3JlbmRlckxpc3QoX2N0eC5wb3N0cywgZnVuY3Rpb24gKHBvc3QpIHsKICAgIHJldHVybiBfb3BlbkJsb2NrKCksIF9jcmVhdGVCbG9jaygiZGl2IiwgewogICAgICBjbGFzczogInBvc3RzIiwKICAgICAga2V5OiBwb3N0CiAgICB9LCBbX2NyZWF0ZVZOb2RlKCJkaXYiLCBfaG9pc3RlZF8yLCBbcG9zdC51c2VyID8gKF9vcGVuQmxvY2soKSwgX2NyZWF0ZUJsb2NrKCJwIiwgX2hvaXN0ZWRfMywgIkAgIiArIF90b0Rpc3BsYXlTdHJpbmcocG9zdC51c2VyLnVzZXJuYW1lKSwgMQogICAgLyogVEVYVCAqLwogICAgKSkgOiAoX29wZW5CbG9jaygpLCBfY3JlYXRlQmxvY2soInAiLCBfaG9pc3RlZF80LCAiQCBpbmNvbm51IikpXSksIF9jcmVhdGVWTm9kZSgiZGl2IiwgX2hvaXN0ZWRfNSwgW19jcmVhdGVWTm9kZSgiZGl2IiwgX2hvaXN0ZWRfNiwgW19jcmVhdGVWTm9kZShfY29tcG9uZW50X3JvdXRlcl9saW5rLCB7CiAgICAgIHRvOiB7CiAgICAgICAgbmFtZTogJ1Bvc3REZXRhaWxzJywKICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgIGlkOiBwb3N0LmlkCiAgICAgICAgfQogICAgICB9CiAgICB9LCB7CiAgICAgIGRlZmF1bHQ6IF93aXRoSWQoZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiBbX2NyZWF0ZVZOb2RlKCJwIiwgbnVsbCwgX3RvRGlzcGxheVN0cmluZyhwb3N0Lm1lc3NhZ2UpLCAxCiAgICAgICAgLyogVEVYVCAqLwogICAgICAgICldOwogICAgICB9KSwKICAgICAgXzogMgogICAgICAvKiBEWU5BTUlDICovCgogICAgfSwgMTAzMgogICAgLyogUFJPUFMsIERZTkFNSUNfU0xPVFMgKi8KICAgICwgWyJ0byJdKV0pLCBfY3JlYXRlVk5vZGUoInAiLCBfaG9pc3RlZF83LCBbX2NyZWF0ZVZOb2RlKCJzcGFuIiwgX2hvaXN0ZWRfOCwgX3RvRGlzcGxheVN0cmluZyhwb3N0LmNvbW1lbnRzLmxlbmd0aCksIDEKICAgIC8qIFRFWFQgKi8KICAgICksIF9ob2lzdGVkXzksIF9jcmVhdGVWTm9kZSgic3BhbiIsIHsKICAgICAgY2xhc3M6ICJ0cmFzaCIsCiAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soJGV2ZW50KSB7CiAgICAgICAgcmV0dXJuICRvcHRpb25zLnRyYXNoUG9zdChwb3N0LmlkKTsKICAgICAgfQogICAgfSwgInN1cHByLiIsIDgKICAgIC8qIFBST1BTICovCiAgICAsIFsib25DbGljayJdKV0pXSksIF9jcmVhdGVWTm9kZSgiZGl2IiwgX2hvaXN0ZWRfMTAsIFtfY3JlYXRlVk5vZGUoInAiLCBudWxsLCBfdG9EaXNwbGF5U3RyaW5nKHBvc3QuY3JlYXRlZEF0KSwgMQogICAgLyogVEVYVCAqLwogICAgKV0pXSk7CiAgfSksIDEyOAogIC8qIEtFWUVEX0ZSQUdNRU5UICovCiAgKSksIF9jcmVhdGVWTm9kZSgiZm9ybSIsIG51bGwsIFtfd2l0aERpcmVjdGl2ZXMoX2NyZWF0ZVZOb2RlKCJpbnB1dCIsIHsKICAgIHR5cGU6ICJ0ZXh0IiwKICAgICJvblVwZGF0ZTptb2RlbFZhbHVlIjogX2NhY2hlWzFdIHx8IChfY2FjaGVbMV0gPSBmdW5jdGlvbiAoJGV2ZW50KSB7CiAgICAgIHJldHVybiAkZGF0YS5tZXNzYWdlID0gJGV2ZW50OwogICAgfSksCiAgICBwbGFjZWhvbGRlcjogIm1lc3NhZ2UuLi4iCiAgfSwgbnVsbCwgNTEyCiAgLyogTkVFRF9QQVRDSCAqLwogICksIFtbX3ZNb2RlbFRleHQsICRkYXRhLm1lc3NhZ2VdXSksIF9jcmVhdGVWTm9kZSgiYnV0dG9uIiwgewogICAgdHlwZTogImJ1dHRvbiIsCiAgICBvbkNsaWNrOiBfY2FjaGVbMl0gfHwgKF9jYWNoZVsyXSA9IGZ1bmN0aW9uICgkZXZlbnQpIHsKICAgICAgcmV0dXJuICRvcHRpb25zLnNlbmRQb3N0KCRkYXRhLm1lc3NhZ2UpOwogICAgfSkKICB9LCAiRW52b3llciIpXSldKSkgOiAoX29wZW5CbG9jaygpLCBfY3JlYXRlQmxvY2soImRpdiIsIF9ob2lzdGVkXzExLCBbX2hvaXN0ZWRfMTIsIF9jcmVhdGVWTm9kZSgiZm9ybSIsIG51bGwsIFtfd2l0aERpcmVjdGl2ZXMoX2NyZWF0ZVZOb2RlKCJpbnB1dCIsIHsKICAgIHR5cGU6ICJ0ZXh0IiwKICAgICJvblVwZGF0ZTptb2RlbFZhbHVlIjogX2NhY2hlWzNdIHx8IChfY2FjaGVbM10gPSBmdW5jdGlvbiAoJGV2ZW50KSB7CiAgICAgIHJldHVybiAkZGF0YS5tZXNzYWdlID0gJGV2ZW50OwogICAgfSksCiAgICBwbGFjZWhvbGRlcjogIm1lc3NhZ2UuLi4iCiAgfSwgbnVsbCwgNTEyCiAgLyogTkVFRF9QQVRDSCAqLwogICksIFtbX3ZNb2RlbFRleHQsICRkYXRhLm1lc3NhZ2VdXSksIF9jcmVhdGVWTm9kZSgiYnV0dG9uIiwgewogICAgdHlwZTogImJ1dHRvbiIsCiAgICBvbkNsaWNrOiBfY2FjaGVbNF0gfHwgKF9jYWNoZVs0XSA9IGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIF9jdHguc2VuZCAmJiBfY3R4LnNlbmQuYXBwbHkoX2N0eCwgYXJndW1lbnRzKTsKICAgIH0pCiAgfSwgIkVudm95ZXIiKV0pXSkpOwp9KTs="},{"version":3,"sources":["/Users/steve/Git/Groupomania/front/src/views/posts/Posts.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n\n  <div class=\"content\" v-if=\"posts\">\n    <div class=\"posts\" v-for=\"post in posts\" :key=\"post\">\n\n      <div class=\"user\">\n        <p v-if=\"post.user\">@ {{ post.user.username }}</p>\n        <p v-else>@ inconnu</p>\n      </div>\n\n      <div class=\"post\">\n        <div class=\"bulle\">\n          <router-link :to=\"{ name: 'PostDetails', params: { id: post.id }}\">\n            <p>{{ post.message }}</p>\n          </router-link>\n        </div>\n          <p class=\"more\">\n            <span class=\"comments\">{{ post.comments.length }}</span> commentaires \n            <span class=\"trash\" @click=\"trashPost(post.id)\">suppr.</span>\n          </p>\n      </div>\n\n      <div class=\"time\">\n        <p>{{ post.createdAt }}</p>\n      </div>\n      \n    </div>\n    <form>\n        <input type=\"text\" v-model=\"message\" placeholder=\"message...\">\n        <button type=\"button\" @click=\"sendPost(message)\">Envoyer</button>\n    </form> \n  </div>\n\n  <div class=\"loading\" v-else>\n    <p>loading...</p>\n     <form>\n        <input type=\"text\" v-model=\"message\" placeholder=\"message...\">\n        <button type=\"button\" @click=\"send\">Envoyer</button>\n    </form> \n  </div>\n\n</template>\n\n<script>\nimport { mapActions, mapState } from 'vuex'\nimport axios from 'axios'\n\nexport default {\n  data () {\n    return {\n      message: null\n    }\n  },\n\n  computed: {\n    ...mapState(['user', 'posts'])\n  },\n\n  methods: {\n    ...mapActions(['getPosts']),\n\n    sendPost(message) {\n    axios.post('http://localhost:3000/api/posts/',\n    {\n      data: {\n        message: message,\n        userId: this.user.id\n      }\n    },\n    {\n      headers: { \"Authorization\" : `Bearer ${ this.user.token }` }\n    })\n    .then(() => { \n      this.message = null,\n      this.getPosts()\n    })\n    .catch(error => console.log(error));   \n    },\n    \n    trashPost(id) {\n    axios.delete('http://localhost:3000/api/posts/' + id,\n    {\n        headers: { \"Authorization\" : `Bearer ${ this.user.token }` }\n    })\n    .then(() => this.getPosts())\n    .catch(error => console.log(error));\n    }\n  },\n  \n  mounted () {\n    this.getPosts()\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.content {\n  margin-bottom: 5em;\n}\n\n.posts {\n  display: flex;\n  margin: 3em 0;\n  .user {\n    flex: 1;\n    margin: 5px;\n    p {\n        margin: 0;\n      }\n    .icon {\n      width: 3em;\n      height: 3em;\n    }\n  }\n  .post {\n    flex: 3;\n    &:hover {\n      .more {\n          display: block;\n        }\n      }\n    .bulle {\n      background-color: whitesmoke;\n      border-radius: 10px;\n      margin: 5px;\n      padding: .4em;\n      p {\n        font-weight: bold;\n      }\n      a {\n        text-decoration: none;\n        color: inherit;\n      }\n      &:hover {\n        margin: 5px;\n        box-shadow: 0px 0px 10px 1px darkgrey;\n      }\n    }\n    .more {\n      margin: 0;\n      display: none;\n    }\n  }\n  .time {\n    flex: 1;\n  }\n}\n\nform {\n  padding: 1em;\n  border-top: solid 2px lightgrey;\n  position: fixed;\n  bottom: 0;\n  left: 0;\n  background: white;\n  width: -webkit-fill-available;\n  input {\n      margin-right: 2em;\n      padding: .3em 1em;\n      width: 15em;\n      border-radius: 4px;\n      border: 1px solid darkgray;\n      &:focus {\n          outline: none;\n          box-shadow: 0px 0px 5px darkgrey;\n      }\n  }\n}\n\n</style>"],"sourceRoot":""}]}