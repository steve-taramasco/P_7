{"remainingRequest":"/Users/steve/Git/Groupomania/front/node_modules/babel-loader/lib/index.js!/Users/steve/Git/Groupomania/front/node_modules/vue-loader-v16/dist/templateLoader.js??ref--6!/Users/steve/Git/Groupomania/front/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/steve/Git/Groupomania/front/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/Users/steve/Git/Groupomania/front/src/views/posts/Posts.vue?vue&type=template&id=5284a266&scoped=true","dependencies":[{"path":"/Users/steve/Git/Groupomania/front/src/views/posts/Posts.vue","mtime":1612914113894},{"path":"/Users/steve/Git/Groupomania/front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/steve/Git/Groupomania/front/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/steve/Git/Groupomania/front/node_modules/vue-loader-v16/dist/templateLoader.js","mtime":499162500000},{"path":"/Users/steve/Git/Groupomania/front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/steve/Git/Groupomania/front/node_modules/vue-loader-v16/dist/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgcmVuZGVyTGlzdCBhcyBfcmVuZGVyTGlzdCwgRnJhZ21lbnQgYXMgX0ZyYWdtZW50LCBvcGVuQmxvY2sgYXMgX29wZW5CbG9jaywgY3JlYXRlQmxvY2sgYXMgX2NyZWF0ZUJsb2NrLCByZXNvbHZlQ29tcG9uZW50IGFzIF9yZXNvbHZlQ29tcG9uZW50LCBjcmVhdGVWTm9kZSBhcyBfY3JlYXRlVk5vZGUsIHRvRGlzcGxheVN0cmluZyBhcyBfdG9EaXNwbGF5U3RyaW5nLCBjcmVhdGVDb21tZW50Vk5vZGUgYXMgX2NyZWF0ZUNvbW1lbnRWTm9kZSwgY3JlYXRlVGV4dFZOb2RlIGFzIF9jcmVhdGVUZXh0Vk5vZGUsIHdpdGhDdHggYXMgX3dpdGhDdHgsIHZNb2RlbFRleHQgYXMgX3ZNb2RlbFRleHQsIHdpdGhEaXJlY3RpdmVzIGFzIF93aXRoRGlyZWN0aXZlcywgd2l0aFNjb3BlSWQgYXMgX3dpdGhTY29wZUlkLCBwdXNoU2NvcGVJZCBhcyBfcHVzaFNjb3BlSWQsIHBvcFNjb3BlSWQgYXMgX3BvcFNjb3BlSWQgfSBmcm9tICJ2dWUiOwoKdmFyIF93aXRoSWQgPSAvKiNfX1BVUkVfXyovX3dpdGhTY29wZUlkKCJkYXRhLXYtNTI4NGEyNjYiKTsKCl9wdXNoU2NvcGVJZCgiZGF0YS12LTUyODRhMjY2Iik7Cgp2YXIgX2hvaXN0ZWRfMSA9IHsKICBrZXk6IDAsCiAgY2xhc3M6ICJjb250ZW50Igp9Owp2YXIgX2hvaXN0ZWRfMiA9IHsKICBjbGFzczogInVzZXIiCn07CnZhciBfaG9pc3RlZF8zID0gewogIGtleTogMAp9Owp2YXIgX2hvaXN0ZWRfNCA9IHsKICBrZXk6IDEKfTsKdmFyIF9ob2lzdGVkXzUgPSB7CiAgY2xhc3M6ICJwb3N0Igp9Owp2YXIgX2hvaXN0ZWRfNiA9IHsKICBjbGFzczogImJ1bGxlIgp9Owp2YXIgX2hvaXN0ZWRfNyA9IHsKICBjbGFzczogImNvbW1lbnRzIgp9OwoKdmFyIF9ob2lzdGVkXzggPSAvKiNfX1BVUkVfXyovX2NyZWF0ZVRleHRWTm9kZSgiIGNvbW1lbnRhaXJlcyAiKTsKCnZhciBfaG9pc3RlZF85ID0gewogIGNsYXNzOiAidGltZSIKfTsKdmFyIF9ob2lzdGVkXzEwID0gewogIGtleTogMSwKICBjbGFzczogImxvYWRpbmciCn07Cgp2YXIgX2hvaXN0ZWRfMTEgPSAvKiNfX1BVUkVfXyovX2NyZWF0ZVZOb2RlKCJwIiwgbnVsbCwgImxvYWRpbmcuLi4iLCAtMQovKiBIT0lTVEVEICovCik7CgpfcG9wU2NvcGVJZCgpOwoKZXhwb3J0IHZhciByZW5kZXIgPSAvKiNfX1BVUkVfXyovX3dpdGhJZChmdW5jdGlvbiAoX2N0eCwgX2NhY2hlLCAkcHJvcHMsICRzZXR1cCwgJGRhdGEsICRvcHRpb25zKSB7CiAgdmFyIF9jb21wb25lbnRfaW9uX2ljb24gPSBfcmVzb2x2ZUNvbXBvbmVudCgiaW9uLWljb24iKTsKCiAgdmFyIF9jb21wb25lbnRfcm91dGVyX2xpbmsgPSBfcmVzb2x2ZUNvbXBvbmVudCgicm91dGVyLWxpbmsiKTsKCiAgcmV0dXJuICRkYXRhLnBvc3RzID8gKF9vcGVuQmxvY2soKSwgX2NyZWF0ZUJsb2NrKCJkaXYiLCBfaG9pc3RlZF8xLCBbKF9vcGVuQmxvY2sodHJ1ZSksIF9jcmVhdGVCbG9jayhfRnJhZ21lbnQsIG51bGwsIF9yZW5kZXJMaXN0KCRkYXRhLnBvc3RzLCBmdW5jdGlvbiAocG9zdCkgewogICAgcmV0dXJuIF9vcGVuQmxvY2soKSwgX2NyZWF0ZUJsb2NrKCJkaXYiLCB7CiAgICAgIGNsYXNzOiAicG9zdHMiLAogICAgICBrZXk6IHBvc3QKICAgIH0sIFtfY3JlYXRlVk5vZGUoImRpdiIsIF9ob2lzdGVkXzIsIFtfY3JlYXRlVk5vZGUoX2NvbXBvbmVudF9pb25faWNvbiwgewogICAgICBuYW1lOiAicGVyc29uLWNpcmNsZS1vdXRsaW5lIiwKICAgICAgY2xhc3M6ICJpY29uIgogICAgfSksIHBvc3QudXNlciA/IChfb3BlbkJsb2NrKCksIF9jcmVhdGVCbG9jaygicCIsIF9ob2lzdGVkXzMsICJAICIgKyBfdG9EaXNwbGF5U3RyaW5nKHBvc3QudXNlci51c2VybmFtZSksIDEKICAgIC8qIFRFWFQgKi8KICAgICkpIDogKF9vcGVuQmxvY2soKSwgX2NyZWF0ZUJsb2NrKCJwIiwgX2hvaXN0ZWRfNCwgIkAgaW5jb25udSIpKV0pLCBfY3JlYXRlVk5vZGUoImRpdiIsIF9ob2lzdGVkXzUsIFtfY3JlYXRlVk5vZGUoImRpdiIsIF9ob2lzdGVkXzYsIFtfY3JlYXRlVk5vZGUoInAiLCBudWxsLCBfdG9EaXNwbGF5U3RyaW5nKHBvc3QubWVzc2FnZSksIDEKICAgIC8qIFRFWFQgKi8KICAgICksIF9jcmVhdGVWTm9kZSgicCIsIG51bGwsIFtfY3JlYXRlVk5vZGUoX2NvbXBvbmVudF9yb3V0ZXJfbGluaywgewogICAgICB0bzogewogICAgICAgIG5hbWU6ICdQb3N0RGV0YWlscycsCiAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICBpZDogcG9zdC5pZAogICAgICAgIH0KICAgICAgfQogICAgfSwgewogICAgICBkZWZhdWx0OiBfd2l0aElkKGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gW19jcmVhdGVWTm9kZSgic3BhbiIsIF9ob2lzdGVkXzcsIF90b0Rpc3BsYXlTdHJpbmcocG9zdC5jb21tZW50cy5sZW5ndGgpLCAxCiAgICAgICAgLyogVEVYVCAqLwogICAgICAgICksIF9ob2lzdGVkXzhdOwogICAgICB9KSwKICAgICAgXzogMgogICAgICAvKiBEWU5BTUlDICovCgogICAgfSwgMTAzMgogICAgLyogUFJPUFMsIERZTkFNSUNfU0xPVFMgKi8KICAgICwgWyJ0byJdKSwgX2NyZWF0ZVZOb2RlKCJzcGFuIiwgewogICAgICBjbGFzczogInRyYXNoIiwKICAgICAgb25DbGljazogZnVuY3Rpb24gb25DbGljaygkZXZlbnQpIHsKICAgICAgICByZXR1cm4gJG9wdGlvbnMudHJhc2gocG9zdC5pZCk7CiAgICAgIH0KICAgIH0sICJzdXBwci4iLCA4CiAgICAvKiBQUk9QUyAqLwogICAgLCBbIm9uQ2xpY2siXSldKV0pXSksIF9jcmVhdGVWTm9kZSgiZGl2IiwgX2hvaXN0ZWRfOSwgX3RvRGlzcGxheVN0cmluZyhwb3N0LmNyZWF0ZWRBdCksIDEKICAgIC8qIFRFWFQgKi8KICAgICldKTsKICB9KSwgMTI4CiAgLyogS0VZRURfRlJBR01FTlQgKi8KICApKSwgX2NyZWF0ZVZOb2RlKCJmb3JtIiwgbnVsbCwgW193aXRoRGlyZWN0aXZlcyhfY3JlYXRlVk5vZGUoImlucHV0IiwgewogICAgdHlwZTogInRleHQiLAogICAgIm9uVXBkYXRlOm1vZGVsVmFsdWUiOiBfY2FjaGVbMV0gfHwgKF9jYWNoZVsxXSA9IGZ1bmN0aW9uICgkZXZlbnQpIHsKICAgICAgcmV0dXJuICRkYXRhLm1lc3NhZ2UgPSAkZXZlbnQ7CiAgICB9KSwKICAgIHBsYWNlaG9sZGVyOiAibWVzc2FnZS4uLiIKICB9LCBudWxsLCA1MTIKICAvKiBORUVEX1BBVENIICovCiAgKSwgW1tfdk1vZGVsVGV4dCwgJGRhdGEubWVzc2FnZV1dKSwgX2NyZWF0ZVZOb2RlKCJidXR0b24iLCB7CiAgICB0eXBlOiAiYnV0dG9uIiwKICAgIG9uQ2xpY2s6IF9jYWNoZVsyXSB8fCAoX2NhY2hlWzJdID0gZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gJG9wdGlvbnMuc2VuZCAmJiAkb3B0aW9ucy5zZW5kLmFwcGx5KCRvcHRpb25zLCBhcmd1bWVudHMpOwogICAgfSkKICB9LCAiRW52b3llciIpXSldKSkgOiAoX29wZW5CbG9jaygpLCBfY3JlYXRlQmxvY2soImRpdiIsIF9ob2lzdGVkXzEwLCBbX2hvaXN0ZWRfMTEsIF9jcmVhdGVWTm9kZSgiZm9ybSIsIG51bGwsIFtfd2l0aERpcmVjdGl2ZXMoX2NyZWF0ZVZOb2RlKCJpbnB1dCIsIHsKICAgIHR5cGU6ICJ0ZXh0IiwKICAgICJvblVwZGF0ZTptb2RlbFZhbHVlIjogX2NhY2hlWzNdIHx8IChfY2FjaGVbM10gPSBmdW5jdGlvbiAoJGV2ZW50KSB7CiAgICAgIHJldHVybiAkZGF0YS5tZXNzYWdlID0gJGV2ZW50OwogICAgfSksCiAgICBwbGFjZWhvbGRlcjogIm1lc3NhZ2UuLi4iCiAgfSwgbnVsbCwgNTEyCiAgLyogTkVFRF9QQVRDSCAqLwogICksIFtbX3ZNb2RlbFRleHQsICRkYXRhLm1lc3NhZ2VdXSksIF9jcmVhdGVWTm9kZSgiYnV0dG9uIiwgewogICAgdHlwZTogImJ1dHRvbiIsCiAgICBvbkNsaWNrOiBfY2FjaGVbNF0gfHwgKF9jYWNoZVs0XSA9IGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuICRvcHRpb25zLnNlbmQgJiYgJG9wdGlvbnMuc2VuZC5hcHBseSgkb3B0aW9ucywgYXJndW1lbnRzKTsKICAgIH0pCiAgfSwgIkVudm95ZXIiKV0pXSkpOwp9KTs="},{"version":3,"sources":["/Users/steve/Git/Groupomania/front/src/views/posts/Posts.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n\n  <div class=\"content\" v-if=\"posts\">\n    <div class=\"posts\" v-for=\"post in posts\" :key=\"post\">\n\n      <div class=\"user\">\n        <ion-icon name=\"person-circle-outline\" class=\"icon\"></ion-icon>\n        <p v-if=\"post.user\">@ {{ post.user.username }}</p>\n        <p v-else>@ inconnu</p>\n      </div>\n\n      <div class=\"post\">\n        <div class=\"bulle\">\n          <p>{{ post.message }}</p>\n          <p>\n            <router-link :to=\"{ name: 'PostDetails', params: { id: post.id }}\">\n              <span class=\"comments\">{{ post.comments.length }}</span>\n              commentaires \n            </router-link>\n            \n            <span class=\"trash\" @click=\"trash(post.id)\">suppr.</span>\n          </p>\n        </div>\n      </div>\n      <div class=\"time\">\n          {{ post.createdAt }}\n      </div>\n      \n    </div>\n    <form>\n        <input type=\"text\" v-model=\"message\" placeholder=\"message...\">\n        <button type=\"button\" @click=\"send\">Envoyer</button>\n    </form> \n  </div>\n\n  <div class=\"loading\" v-else>\n    <p>loading...</p>\n     <form>\n        <input type=\"text\" v-model=\"message\" placeholder=\"message...\">\n        <button type=\"button\" @click=\"send\">Envoyer</button>\n    </form> \n  </div>\n\n</template>\n\n<script>\nimport axios from 'axios'\nexport default {\n  name: 'Post',\n  data () {\n    return {\n      posts: null,\n      message: null,\n      userId: sessionStorage.getItem('userId'),\n      token : sessionStorage.getItem('token'),\n    }\n  },\n\n  mounted () {\n    this.getPosts(),\n    console.log(this.posts)\n  },\n\n\n  methods: {\n\n    getDate(date) {\n      let date_formater = new Date(date).toISOString().slice(0, 19).replace('T', ' ');\n      return date_formater;\n    },\n\n    getPosts() {\n      axios.get('http://localhost:3000/api/posts/',\n      {\n        headers: { \"Authorization\" : `Bearer ${ this.token }` }\n      })\n      .then(res => {\n        this.posts = res.data.posts;\n\n        let date = this.posts[0].createdAt;\n        console.log(date),\n        console.log(this.getDate(date))\n      })\n      .catch(error => console.log(error));\n    },\n\n    trash(id) {\n      axios.delete('http://localhost:3000/api/posts/' + id,\n      {\n          headers: { \"Authorization\" : `Bearer ${ this.token }` }\n      })\n      .then(() => this.getPosts())\n      .catch(error => console.log(error));\n    },\n    \n    send() {\n      axios.post('http://localhost:3000/api/posts/',\n      {\n        data: {\n          message: this.message,\n          userId: this.userId\n        }\n      },\n      {\n        headers: { \"Authorization\" : `Bearer ${ this.token }` }\n      })\n      .then(() => { this.message = null, this.getPosts() })\n      .catch(error => console.log(error));   \n    }\n\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.content {\n  margin-bottom: 5em;\n}\n\n.posts {\n  display: flex;\n  margin: 3em 0;\n  .user {\n    flex: 1;\n    margin: 5px;\n\n    p {\n        margin: 0;\n      }\n    .icon {\n      width: 3em;\n      height: 3em;\n    }\n  }\n\n  .post {\n    flex: 3;\n\n    .bulle {\n      background-color: whitesmoke;\n      border-radius: 10px;\n      margin: 5px;\n      padding: .4em;\n\n      p:nth-child(1) {\n        font-weight: bold;\n      }\n      a {\n        text-decoration: none;\n        color: inherit;\n      }\n      &:hover {\n        margin: 5px;\n        box-shadow: 0px 0px 10px 1px darkgrey;\n      }\n    }\n  }\n  .time {\n    flex: 1;\n  }\n}\n\nform {\n  padding: 1em;\n  border-top: solid 2px lightgrey;\n  position: fixed;\n  bottom: 0;\n  left: 0;\n  background: white;\n  width: -webkit-fill-available;\n  input {\n      margin-right: 2em;\n      padding: .3em 1em;\n      width: 15em;\n      border-radius: 4px;\n      border: 1px solid darkgray;\n      &:focus {\n          outline: none;\n          box-shadow: 0px 0px 5px darkgrey;\n      }\n  }\n}\n</style>"],"sourceRoot":""}]}